#type:     node
#context:  top
#internal: hqueuescheduler
#icon:     MISC/hqueue_logo

= HQueue Scheduler =

"""Schedules work items using HQueue."""

This will schedule work items using HQueue in order to execute them on remote 
machines such as a farm.

This requires HQueue to be installed and setup on the local machine.

@top_attributes
::`hqueue_jobid`:
    #type: integer

    When the schedule submits a work item to HQueue, it will add this attribute
    to the work item in order to track the HQueue job id.

@parameters

These are global parameters for all work items using this scheduler.

== Scheduler ==

[Include:_scheduler_common#pdg_workingdir]
    
    
Override Local Shared Root:
    #id: uselocalsharedroot

    Enables overriding the location of local shared root directory.
    
    
=== Local Shared Root Paths ===

Load from HQueue:
    #id: queryhq

    Queries the HQueue server to retrieve the local shared root paths.
    
    
Windows:
    #id: localsharedroot_win

    The local shared root path on Windows.
    
    
macOS:
    #id: localsharedroot_macosx
    
    The local shared root path on macOS.
    
Linux:
    #id: localsharedroot_linux
    
    The local shared root path on Linux.
    
HQueue Server:
    #id: address

    URL of the HQueue server. Example: http://localhost:5000
    
    
Use Universal HFS:
    #id: useuniversalhfs

    Enable to use the __Universal HFS__.
    
    
Universal HFS:
    #id: hfspathuniversal

    A platform-agnostic path to the $HFS directory.
    
    
=== HFS Per Platform ===

Linux HFS Path:
    #id: hfs_linux_path

    $HFS path for Linux.
    
    
macOS HFS Path:
    #id: hfs_macosx_path

    $HFS path for macOS.
    
    
Windows HFS Path:
    #id: hfs_windows_path

    $HFS path for Windows.
    
    
[Include:_scheduler_common#overrideportrange]
    
[Include:_scheduler_common#callbackportrange]
    
    
Submit Graph As Job:
    #id: submitjob

    Called when the scheduler should cook the entire TOP Network as a standalone
    job. Displays the status URI for the submitted job.
    
    
== Job Parms ==

These job specific parameters can be overridden by each node under the 
__HQueue Scheduler__ tab on the node's __Schedulers__ parameter interface.

Job Priority:
    #id: hqueue_priority

    Priority for the job in HQueue.
    
    
Assign To:
    #id: hqueue_assign_to

    Specify clients to assign to.
    
    __Any Client:__ Assign to any client.
        
    __Listed Clients:__ Assign to specified clients.
        
    __Clients from Listed Groups:__ Assign to specified client groups.
        
    
Clients:
    #id: hqueue_clients

    Names of clients to assign jobs to, separated by space.
    
    
Select Clients:
    #id: select_clients

    Select clients from HQueue to populate the Clients list.
    
    
Client Groups:
    #id: hqueue_client_groups

    Names of client groups to assign jobs to, separated by space.
    
    
Select Groups:
    #id: select_client_groups

    Select client groups from HQueue to populate the Client Groups list.
    
    
Set Number of CPUs per Job:
    #id: hqueue_is_CPU_number_set

    Enable setting the number of CPUs to use per job.
    
    
CPUs per Job:
    #id: hqueue_CPUs_to_use

    Specify the number of CPUs to use per job.
    
    
[Include:/nodes/top/_scheduler_task_env_common]
    
    
=== Advanced ===

Allowed Host:
    #id: hqueue_host
    
    The hostname of the machine that the job should execute on.
    
Tag List:
    #id: hqueue_tags

    Additional job tags to pass to HQueue.
    
Conditions JSON:
    #id: hqueue_conditions
    
    Additional job conditions to pass to HQueue in JSON format.
    
    
@related
- [Node:top/localscheduler]
- [Node:top/pythonscheduler]
- [Node:top/tractorscheduler]
- [Node:top/deadlinescheduler]


