= Configuration =

== Server Configuration ==
HQueue can be configured by editing the configuration file, `/opt/hqueue/hqserver.ini`, located on the server.

Below is a list of the configuration variables that can be modified.


NOTE:
     Use `%(here)s` in a variable value to refer to the folder path containing `hqserver.ini`.

Configuration Variable ||
    Description ||

debug |
    Set to `true` to output debugging information into the server logs (see [Logging|logging]). 
email_to |
    The email address that receives messages when a system error or notification occurs.  `smtp_server` must also be set. 
error_email_from |
    The email address that sends messages when a system error or notification occurs.  `smtp_server` must also be set. 
hqserver.activeTimeout |
    The number of minutes that pass before a client machine is marked as 'not responding'. 
hqserver.expireJobsDays |
    The number of days that pass before a finished job is permanently deleted from HQueue. 
hqserver.port |
    The port number that the HQueue server listens on.  This variable must have the same value as `port`. 
hqserver.sharedNetwork.host |
    The machine hosting the shared network drive. 
hqserver.sharedNetwork.mount.linux |
    The mount point to the shared network drive on a Linux client machine. 
hqserver.sharedNetwork.mount.macosx |
    The mount point to the shared network drive on a Mac OS X client machine. 
hqserver.sharedNetwork.mount.windows |
    The mount point to the shared network drive on a Windows client machine. 
hqserver.sharedNetwork.path |
    The folder path to the shared network drive on the host machine. 
hqserver.upgradePriority |
    The priority setting for the built-in "Upgrade" jobs. 
job_logs_dir |
    The folder where job logs are saved to. 
port |
    The port number that the HQueue server listens on.  This variable must have the same value as `hqserver.port`. 
smtp_server |
    The mail server that delivers messages when a system error or notification occurs. 
sqlalchemy.default.pool_size |
    The maximum number of database connections available in the connection pool.  If you see "QueuePool limit of size" errors in the server log, then you need to increase the value of this variable.  As a general rule of thumb, set `pool_size` equal to roughly the number of client machines on the farm. 
sqlalchemy.default.max_overflow |
    The maximum number of database connections to create in excess of the value defined in `sqlalchemy.default.pool_size`.  This variable takes effect only during peak periods when the number of connections required exceeds the maximum pool size. 



=== Applying Server Configuration Changes ===

After editing `hqserver.ini`, the HQueue server must be restarted in order to pick up any changes.

To restart the server on Linux, run:

{{{
#!bash
cd /opt/hqueue
./scripts/hqserverd restart
}}}

To restart the server On Mac OS X, run:

{{{
#!bash
launchctl unload /Library/LaunchDaemons/com.sidefx.hqserver.plist
launchctl load /Library/LaunchDaemons/com.sidefx.hqserver.plis
}}}

To restart the server on Windows, go to `Control Panel -> Administrative Tools -> Services` and restart the HQueueServer service.


== Client Configuration ==

An HQueue Client can be configured by editing the configuration file, `hqnode.ini`, located in the client installation directory.

Below is a list of the configuration variables that can be modified.

Configuration Variable ||
    Description ||

sharedNetwork.mount |
    The mount point to the shared network drive on the client.
server |
    The HQueue server the client should connect to. If this is set, the `port` must also be set to the server's port.
port |
    The port number that the HQueue server listens on.
name |
    The name for the client. This is only needed if you are planning to run multiple clients on the same machine. If you wish to run multiple clients on the same machine, ensure each client is launched from separate installation directories and configure each client's `hqnode.ini` file to have a unique, non-empty name.
cpus |
    The number of cpus available to the client for running jobs.
auto_upgrade |
    Controls whether the client should automatically upgrade on start up if an upgrade is available. Set this to `0` to disable automatic upgrade, set it to `1` to enable automatic upgrade (default).

=== Applying Client Configuration Changes ===

After editing `hqserver.ini`, the HQueue server must be restarted in order to pick up any changes.

To restart the server on Linux, run:

{{{
#!bash
cd /home/hquser/hqclient
./hqclientd restart
}}}
where `/home/hquser/hqclient` is the HQueue client install location.

To restart the server On Mac OS X, run:

{{{
#!bash
launchctl unload /Library/LaunchDaemons/com.sidefx.hqclient.plist
launchctl load /Library/LaunchDaemons/com.sidefx.hqclient.plist
}}}

To restart the server on Windows, go to `Control Panel -> Administrative Tools -> Services` and restart the HQueueClient service.