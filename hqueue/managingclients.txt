= Managing Clients =
HQueue clients are machines on the farm that execute jobs assigned by the server.

Use the __CLIENTS__ page on the HQueue web interface to add and manage clients on the farm.

<center>
[Image:/images/hqueue/clients_table.png]
The clients list on the HQueue web interface.
</center>

Below is a list of the columns that appear in the clients list:

Column ||
    Description ||

(no name) |
    Contains a checkbox for selecting a client.  Apply actions to selected clients using the buttons at the bottom of the list. 
Status (no label) |

    The client's status:

    <font style="color:#00CC33">+(fa-circle)</font> -> client is available
    
    <font style="color:#FF0000">+(fa-circle)</font> -> client is unavailable
    
    <font style="color:#ff6600">+(fa-circle)</font> -> client is currently running jobs
    
    <font style="color:#555555">+(fa-circle)</font> -> client is offline

Client |
    The machine name and IP address.  Click on the name to view the machine's profile.  If the client needs an upgrade, then a "`*NEEDS UPGRADE*`" message appears. 
Last Heartbeat |
    The number of seconds that have passed since the client machine last contacted the HQueue server.  If the client has not contacted the server since the server started, then the column displays "No Response". 
Platform |
    The machine's operating system and architecture. 
CPUs |
    The number of processors on the client machine and their processor speeds. 
Memory |
    The amount of memory installed on the client machine. 
Load |
    A measure of how busy the machine is.  The maximum load value is equal to the number of CPUs.  For example, a machine with 4 CPUs and a load of 4.0 means that all CPUs are at 100% usage. 
Idle Time |
    The number of minutes that have passed since the machine received either a mouse or keyboard event from its primary user (Mac OS X and Linux only).  For Linux machines, the idle time is reported only if the client machine is configured to grant X11 display server access to the user account running the HQueue client daemon.  See the 'By Idle Time' subsection at [Client Availability Rules|managingclients#availability] for more details. 
Enabled |
    Whether the machine is allowed to receive jobs or not. 
Notes (no label) |
    Indicates whether the client has a note attached to it or not.
    :box:
        #display: bordered gray
        [Icon:/images/hqueue/note.png] -> a note exists. Hover over the icon to view the note. Click on the icon to view the note's full thread.
    
        [Icon:/images/hqueue/add_note.png] -> no note. Click on the icon to attach a note.

Availability |
    The list of rules that determine when the server can assign jobs to the client.  See [Client Availability Rules|managingclients#availability]. 


== Viewing Clients == (viewing)
Click on the client's name in the client list to view the machine's hardware specifications and configuration.  General information is located under the Client Details section as shown below.

<center>
[Image:/images/hqueue/client_view.png]
The Client Details section on the client view page.
</center>

The following table describes the fields found in the __General__ group box:

Field ||
    Description ||

Hostname |
    The client's machine name. 
Status |
    The client's status. 
Last Heartbeat |
    The number of seconds that have passed since the client machine last contacted the HQueue server.  If the client has not contacted the server since the server started, then the column displays "No Response". 
Listen Port |
    The port number that the client is using to communicate with the server. 
Load |
    A measure of how busy the machine is.  The maximum load value is equal to the number of CPUs.  For example, a machine with 4 CPUs and a load of 4.0 means that all CPUs are at 100% usage. 
Groups |
    The groups that the client is a member of. 
Install Location |
    The install location of the HQueue client files. 
`(NEEDS UPGRADE)` |
    This property appears when the client requires an upgrade. Clicking the 'Upgrade' button next to it will upgrade the client. 

The following table describes the fields found in the __Machine Specifications__ group box:

Property Name ||
    Description ||

IP Address |
    The machine's IP address. 
Platform |
    The machine's operating system and architecture. 
CPUs |
    The number of CPUs on the client machine and their frequency. 
Memory |
    The amount of memory reported by the client machine. 
Free Disk Space |
    The amount of free disk space on the client machine. 
Disk Capacity |
    The total amount of disk space available on the client machine. 

The following table describes the fields found in the __Remote Login__ group box:

Property Name ||
    Description ||

Username |
    The username used to remotely log into the machine.  Remote login occurs when restarting the machine from the __CLIENTS__ page. 
Password |
    The password used to remotely log into the machine.  It appears as a series of *'s if a password is set and as NOT SET if no password is set.  Remote login occurs when restarting the machine from the __CLIENTS__ page. 
Set Username and Password |
    Click on this button to change the username and password used to remotely log into the machine.  Remote login occurs when restarting the machine from the __CLIENTS__ page. 



== Client Availability Rules == (availability)

The availability of a client machines to take on jobs is determined by a set of rules.  These rules can be based on the day and time of the week or they can be based on the machine's idle time (Linux only).  If *at least one rule* in the set is found to be true, then the client is available.

<center>
[Image:/images/hqueue/client_availability_rules.png]
Client availability rules.
</center>

=== 'By Time' Rules ===

'By Time' rules specify the time of day and day of the week when the machine is available to take on jobs.  For a dedicated render machine, a rule of 'Anytime, Anyday' is sufficient to make the machine available all the time.  For a workstation, a couple of rules are typically needed to make the machine available outside of work hours.

For example, the following set of rules makes a machine available outside of work hours (assuming a 9am-5pm work schedule):

Rule # ||
    Anytime ||
        Day ||
            Start Time ||
                End Time ||

1 |
    No |
        Weekdays |
            5:00pm |
                9:00am 
2 |
    Yes |
        Weekends |
            `--` |
                `--` 

=== 'By Idle Time' Rules ===

'By Idle Time' rules specify the minimum number of minutes that the client machine must be idle when it is available to take on jobs.  A machine is considered to be idle if it does not receive any keyboard or mouse events from its primary user.  'By Idle Time' rules are useful for workstations but not so much for dedicated render machines.

:box:
    #display: bordered yellow
    *Caveat:* 'By Idle Time' rules only apply to Mac OS X and Linux machines.
    
    For Linux machines, the machine must be configured to grant X11 display server access to the user account running the HQueue client daemon.  This can be done by logging into the machine as the primary user and running the following command in a terminal:

    {{{
    #!bash
    xhost +local:
    }}}



== Adding Clients == (add)

See [Adding a Linux Client|faqs#how-do-i-add-a-linux-client-machine-to-the-farm], [Adding a Windows Client|faqs#how-do-i-add-a-windows-client-machine-to-the-farm], and [Adding a Mac OSX Client|faqs#how-do-i-add-a-mac-osx-client-machine-to-the-farm].



== Restarting Clients == (restart)

=== Restarting from the HQueue Web Interface ===

Go to the __CLIENTS__ page, check the box for the target machine and click on the 'Restart' button located below the client list.  Check multiple boxes to restart several machines at once.

This feature uses secure shell (SSH) to remotely connect to the target machine.  If restarting fails, make sure that SSH is installed on the client and that the SSH daemon is running.  Additionally check that the correct username and password are registered with HQueue.  See the 'Remote Login' table at [Viewing Clients|managingclients#viewing] for more details.

:box:
    #display: bordered yellow
    *Caveat:* Restarting from the HQueue web interface is currently not supported for Windows clients.

=== Restarting Locally on the Client Machine ===

See 
[Restarting a Linux Client|faqs#how-do-i-restart-the-hqueue-client-on-my-linux-machine], 
[Restarting a Mac OSX Client|faqs#how-do-i-restart-the-hqueue-client-on-my-mac-osx-machine],
and
[Restarting a Windows Client|faqs#how-do-i-restart-the-hqueue-client-on-my-windows-machine].



== Upgrading Clients == (upgrade)

Go to the __CLIENTS__ page, check the box for the target machine and click on the 'Upgrade' button located below the client list.  Check multiple boxes to upgrade several machines at once.

Clicking on the 'Upgrade' assigns an upgrade job to the target machine instructing it to download and install the new client code.

A `*NEEDS UPGRADE*` message appears beside the machine's hostname if the client is out-of-date.



== Removing Clients == (remove)

NOTE:
     Jobs running on a removed client are eventually abandoned.  Make sure to cancel all running jobs before removing the client.

=== Removing from the HQueue Web Interface ===

Go to the __CLIENTS__ page, check the box for the target machine and click on the 'Remove' button located below the client list.  Check multiple boxes to remove several clients at once.

This feature uses secure shell (SSH) to remotely connect to the target machine and remove the HQueue client.  If removing fails, make sure that SSH is installed on the client and that the SSH daemon is running.  Additionally check that the correct username and password are registered with HQueue.  See the 'Remote Login' table at [Viewing Clients|managingclients#viewing] for more details.

:box:
    #display: bordered yellow
    *Caveat:* Removing from the HQueue web interface is currently not supported for Windows clients.

=== Removing Locally on the Client Machine ===

See 
[Uninstalling a Linux Client|faqs#how-do-i-uninstall-the-hqueue-client-on-my-linux-machine], 
[Uninstalling a Mac OSX Client|faqs#how-do-i-uninstall-the-hqueue-client-on-my-mac-osx-machine],
and
[Uninstalling a Windows Client|faqs#how-do-i-uninstall-the-hqueue-client-on-my-windows-machine].
